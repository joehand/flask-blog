{% extends "_base.html" %}
{% import "macros/_css.html" as css %}

    {%- block css -%}
        {{ css.render_css('admin') }}
    {%- endblock -%}

    {%- block siteheader -%} 
    <nav class="admin-nav">
        <a class="admin-link small-caps useicons" href="{{url_for('admin.PostAdmin:index')}}">&#xe600;</a>
        <div class="dashboard-links">
            <a href="{{url_for('admin.upload')}}" class="useicons">&#xe61d;</a>
            <a href="#" class="settings-button useicons">&#xe617;</a>
        </div>
    </nav>
    <div class="save-message"></div>
    {%- endblock siteheader -%} 

    {%- block footer %}{%- endblock -%} 

    {%- block footer_js %}
        <script>
            var {{ config.PROJECT }} = {}; //namespace everything under here.
            {%- block post_js %}
            {{ config.PROJECT }}.postsBootstrap = [
                {%- for post in g.posts -%}
                {{post.to_dict()|safe}},
                {%- endfor -%}
            ];
            {%- endblock post_js -%}
            {{ config.PROJECT }}.pagesBootstrap = [
                {%- for post in g.pages -%}
                    {{post.to_dict()|safe}},
                {%- endfor -%}
            ];

            {{ config.PROJECT }}.childView = {%- block js_view %}null{%- endblock js_view -%};

            {{ config.PROJECT }}.postURL = '{{url_for('admin.PostAdmin:index')}}';

            {{ config.PROJECT }}.currentUser = {
                                'id'     : '{{current_user.id}}',
                                'roles'  : [{% for role in current_user.roles %}'{{role.name}}'{% endfor %}],
                                'email'  : '{{current_user.email}}'
                              };
        </script>
        {%- if config.PRODUCTION %}
        <script data-main="{{ url_for('static', filename='build/app.min')}}" src="{{ url_for('static', filename='build/require.js')}}"></script>
        {%- else %}
        <script data-main="{{ url_for('static', filename='js/app')}}" src="{{ url_for('static', filename='js/libs/require.js')}}"></script>
        {%- endif %}
    {% endblock footer_js -%}