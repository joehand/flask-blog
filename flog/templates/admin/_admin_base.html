{% extends "_base.html" %}
{% set css_name = 'admin' %}

    {%- block siteheader -%} 
    {%- endblock -%} 

    {%- block adminheader -%}
    <nav class="admin-nav">
        <a class="admin-link small-caps useicons" href="{{url_for('admin.PostAdmin:index')}}">&#xe600;</a>
    </nav>
    <div class="save-message"></div>
    {%- endblock adminheader -%}

    {%- block footer %}
    {%- endblock -%} 

    {%- block footer_js %}
        <script>
            {%- block post_js %}
            var {{ config.PROJECT }} = {}; //namespace everything under here.
            
            {{ config.PROJECT }}.postsBootstrap = [
                {%- for post in g.posts -%}
                {{post.to_dict()|safe}},
                {%- endfor -%}
            ];
            {{ config.PROJECT }}.pagesBootstrap = [
                {%- for post in g.pages -%}
                    {{post.to_dict()|safe}},
                {%- endfor -%}
            ];
            {%- endblock post_js -%}

            {{ config.PROJECT }}.childView = {%- block js_view %}null{%- endblock js_view -%};

            {{ config.PROJECT }}.postURL = '{{url_for('admin.PostAdmin:index')}}';

            {{ config.PROJECT }}.currentUser = {
                                'id'     : '{{current_user.id}}',
                                'roles'  : [{% for role in current_user.roles %}'{{role.name}}'{% endfor %}],
                                'email'  : '{{current_user.email}}'
                              };
        </script>
        <script data-main="{{ url_for('static', filename='js/app')}}" src="{{ url_for('static', filename='js/libs/require.js')}}"></script>
    {% endblock footer_js -%}